\hypertarget{_o_s_t_m_8cpp_source}{}\subsection{O\+S\+T\+M.\+cpp}

\begin{DoxyCode}
00001 \textcolor{comment}{/* }
00002 \textcolor{comment}{ * File:   OSTM.cpp}
00003 \textcolor{comment}{ * Author: Zoltan Fuzesi C00197361, }
00004 \textcolor{comment}{ * IT Carlow, Software Engineering, }
00005 \textcolor{comment}{ *}
00006 \textcolor{comment}{ * Supervisor : Joe Kehoe, }
00007 \textcolor{comment}{ *}
00008 \textcolor{comment}{ * C++ Software Transactional Memory, }
00009 \textcolor{comment}{ * }
00010 \textcolor{comment}{ * Created on December 18, 2017, 2:09 PM}
00011 \textcolor{comment}{ * OSTM base class function declarations.}
00012 \textcolor{comment}{ */}
00013 
00014 \textcolor{preprocessor}{#include "\hyperlink{_o_s_t_m_8h}{OSTM.h}"}
00015 
00016 \textcolor{keywordtype}{int} \hyperlink{class_o_s_t_m_acb617b9666d198c0de333c8613df0d4b_acb617b9666d198c0de333c8613df0d4b}{OSTM::global\_Unique\_ID\_Number} = 0;
00017 
\hypertarget{_o_s_t_m_8cpp_source.tex_l00021}{}\hyperlink{class_o_s_t_m_a968edf778668bd0ec7603f0571619196_a968edf778668bd0ec7603f0571619196}{00021} \hyperlink{class_o_s_t_m_a968edf778668bd0ec7603f0571619196_a968edf778668bd0ec7603f0571619196}{OSTM::OSTM}()
00022 \{
00023     \textcolor{comment}{/* @24 Integer field <version> indicates the version number of the inherited child object */}
00024     this->\hyperlink{class_o_s_t_m_a9a6ea36181be2db7f9082d77956511d7_a9a6ea36181be2db7f9082d77956511d7}{version} = \hyperlink{class_o_s_t_m_a0bb6ae8411d25f8e7b82d0a61729ea89_a0bb6ae8411d25f8e7b82d0a61729ea89}{ZERO};
00025     \textcolor{comment}{/* @26 Integer field <uniqueID> is a unique identifier assigned to every object registered in OSTM
       library */}
00026     this->\hyperlink{class_o_s_t_m_aa9fe59368b701af7f70befa23bd6901a_aa9fe59368b701af7f70befa23bd6901a}{uniqueID} = \hyperlink{class_o_s_t_m_adee6903c1100e0d78640bd4b85e5d7df_adee6903c1100e0d78640bd4b85e5d7df}{Get\_global\_Unique\_ID\_Number}();
00027     \textcolor{comment}{/* @28 Boolean value <canCommit> to determine the object can or cannot commit */}
00028     this->\hyperlink{class_o_s_t_m_a2a5b89641af274ddc69bdf8c1c1a07d6_a2a5b89641af274ddc69bdf8c1c1a07d6}{canCommit} = \textcolor{keyword}{true};
00029     \textcolor{comment}{/* @30 Boolean field <abort\_Transaction> to determine the object can or cannot commit */}
00030     this->\hyperlink{class_o_s_t_m_a5121d9c4b08320b26beca82ba2f85c4a_a5121d9c4b08320b26beca82ba2f85c4a}{abort\_Transaction} = \textcolor{keyword}{false};
00031 \}
00032 
00033 
\hypertarget{_o_s_t_m_8cpp_source.tex_l00039}{}\hyperlink{class_o_s_t_m_a2314f55a127b94aa8a51d19ba798401e_a2314f55a127b94aa8a51d19ba798401e}{00039} \hyperlink{class_o_s_t_m_a968edf778668bd0ec7603f0571619196_a968edf778668bd0ec7603f0571619196}{OSTM::OSTM}(\textcolor{keywordtype}{int} \_version\_number\_, \textcolor{keywordtype}{int} \_unique\_id\_)
00040 \{
00041     \textcolor{comment}{/* @42 Integer field <version> indicates the version number of the inherited child object */}
00042     this->\hyperlink{class_o_s_t_m_aa9fe59368b701af7f70befa23bd6901a_aa9fe59368b701af7f70befa23bd6901a}{uniqueID} = \_unique\_id\_;
00043     \textcolor{comment}{/* @44 Integer field <uniqueID> is a unique identifier assigned to every object registered in OSTM
       library */}
00044     this->\hyperlink{class_o_s_t_m_a9a6ea36181be2db7f9082d77956511d7_a9a6ea36181be2db7f9082d77956511d7}{version} = \_version\_number\_;
00045     \textcolor{comment}{/* @46 Boolean value <canCommit> to determine the object can or cannot commit */}
00046     this->\hyperlink{class_o_s_t_m_a2a5b89641af274ddc69bdf8c1c1a07d6_a2a5b89641af274ddc69bdf8c1c1a07d6}{canCommit} = \textcolor{keyword}{true};
00047     \textcolor{comment}{/* @48 Boolean value <abort\_Transaction> to determine the object can or cannot commit */}
00048     this->\hyperlink{class_o_s_t_m_a5121d9c4b08320b26beca82ba2f85c4a_a5121d9c4b08320b26beca82ba2f85c4a}{abort\_Transaction} = \textcolor{keyword}{false};
00049 \}
00050 
\hypertarget{_o_s_t_m_8cpp_source.tex_l00054}{}\hyperlink{class_o_s_t_m_a30a17d73d0259c60eeab72d6dfa9ceb1_a30a17d73d0259c60eeab72d6dfa9ceb1}{00054} \hyperlink{class_o_s_t_m_a30a17d73d0259c60eeab72d6dfa9ceb1_a30a17d73d0259c60eeab72d6dfa9ceb1}{OSTM::~OSTM}() \{
00055     \textcolor{comment}{/* Destroy the object. */}
00056 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00061}{}\hyperlink{class_o_s_t_m_adee6903c1100e0d78640bd4b85e5d7df_adee6903c1100e0d78640bd4b85e5d7df}{00061} \textcolor{keywordtype}{int} \hyperlink{class_o_s_t_m_adee6903c1100e0d78640bd4b85e5d7df_adee6903c1100e0d78640bd4b85e5d7df}{OSTM::Get\_global\_Unique\_ID\_Number}() \{
00062     \textcolor{comment}{/* @64 Checking the global\_Unique\_ID\_Number */}
00063     \textcolor{keywordflow}{if}(\hyperlink{class_o_s_t_m_acb617b9666d198c0de333c8613df0d4b_acb617b9666d198c0de333c8613df0d4b}{global\_Unique\_ID\_Number} > 10000000)
00064         \textcolor{comment}{/* @65 Reset global\_Unique\_ID\_Number to ZERO*/}
00065         \hyperlink{class_o_s_t_m_acb617b9666d198c0de333c8613df0d4b_acb617b9666d198c0de333c8613df0d4b}{global\_Unique\_ID\_Number} = 0;
00066     \textcolor{comment}{/* @67 return static global\_Unique\_ID\_Number */}
00067     \textcolor{keywordflow}{return} ++\hyperlink{class_o_s_t_m_acb617b9666d198c0de333c8613df0d4b_acb617b9666d198c0de333c8613df0d4b}{global\_Unique\_ID\_Number};
00068 \}
00069 
\hypertarget{_o_s_t_m_8cpp_source.tex_l00075}{}\hyperlink{class_o_s_t_m_ab5019a32185631c08abbf826422f2d93_ab5019a32185631c08abbf826422f2d93}{00075} \textcolor{keywordtype}{void} \hyperlink{class_o_s_t_m_ab5019a32185631c08abbf826422f2d93_ab5019a32185631c08abbf826422f2d93}{OSTM::Set\_Unique\_ID}(\textcolor{keywordtype}{int} \hyperlink{class_o_s_t_m_aa9fe59368b701af7f70befa23bd6901a_aa9fe59368b701af7f70befa23bd6901a}{uniqueID}) \{
00076     \textcolor{comment}{/* @77 set object uniqueID to parameter integer value */}
00077     this->uniqueID = \hyperlink{class_o_s_t_m_aa9fe59368b701af7f70befa23bd6901a_aa9fe59368b701af7f70befa23bd6901a}{uniqueID};
00078 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00082}{}\hyperlink{class_o_s_t_m_a5a01a8b98d16b1d1904ecf9356e7b71d_a5a01a8b98d16b1d1904ecf9356e7b71d}{00082} \textcolor{keywordtype}{int} \hyperlink{class_o_s_t_m_a5a01a8b98d16b1d1904ecf9356e7b71d_a5a01a8b98d16b1d1904ecf9356e7b71d}{OSTM::Get\_Unique\_ID}()\textcolor{keyword}{ const}
00083 \textcolor{keyword}{}\{
00084     \textcolor{comment}{/* @85 return Object uniqueID */}
00085     \textcolor{keywordflow}{return} \hyperlink{class_o_s_t_m_aa9fe59368b701af7f70befa23bd6901a_aa9fe59368b701af7f70befa23bd6901a}{uniqueID};
00086 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00092}{}\hyperlink{class_o_s_t_m_a9529ad8d6d28c1f0cc9b86ed91df1ae1_a9529ad8d6d28c1f0cc9b86ed91df1ae1}{00092} \textcolor{keywordtype}{void} \hyperlink{class_o_s_t_m_a9529ad8d6d28c1f0cc9b86ed91df1ae1_a9529ad8d6d28c1f0cc9b86ed91df1ae1}{OSTM::Set\_Version}(\textcolor{keywordtype}{int} \hyperlink{class_o_s_t_m_a9a6ea36181be2db7f9082d77956511d7_a9a6ea36181be2db7f9082d77956511d7}{version})
00093 \{
00094     \textcolor{comment}{/* @95 set object version to parameter integer value */}
00095     this->version = \hyperlink{class_o_s_t_m_a9a6ea36181be2db7f9082d77956511d7_a9a6ea36181be2db7f9082d77956511d7}{version};
00096 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00100}{}\hyperlink{class_o_s_t_m_a1f1db9d482f22c8e7caa17dfb340626b_a1f1db9d482f22c8e7caa17dfb340626b}{00100} \textcolor{keywordtype}{int} \hyperlink{class_o_s_t_m_a1f1db9d482f22c8e7caa17dfb340626b_a1f1db9d482f22c8e7caa17dfb340626b}{OSTM::Get\_Version}()\textcolor{keyword}{ const}
00101 \textcolor{keyword}{}\{
00102     \textcolor{comment}{/* return object version number */}
00103     \textcolor{keywordflow}{return} \hyperlink{class_o_s_t_m_a9a6ea36181be2db7f9082d77956511d7_a9a6ea36181be2db7f9082d77956511d7}{version};
00104 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00108}{}\hyperlink{class_o_s_t_m_a5f90caa4384d371c16b7cac860d9f89a_a5f90caa4384d371c16b7cac860d9f89a}{00108} \textcolor{keywordtype}{void} \hyperlink{class_o_s_t_m_a5f90caa4384d371c16b7cac860d9f89a_a5f90caa4384d371c16b7cac860d9f89a}{OSTM::increase\_VersionNumber}()
00109 \{
00110     \textcolor{comment}{/* @111 increase object version number */}
00111     this->\hyperlink{class_o_s_t_m_a9a6ea36181be2db7f9082d77956511d7_a9a6ea36181be2db7f9082d77956511d7}{version} += 1;
00112 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00117}{}\hyperlink{class_o_s_t_m_a813ee61c9d1c83c6a6ae30d12aca8a5d_a813ee61c9d1c83c6a6ae30d12aca8a5d}{00117} \textcolor{keywordtype}{void} \hyperlink{class_o_s_t_m_a813ee61c9d1c83c6a6ae30d12aca8a5d_a813ee61c9d1c83c6a6ae30d12aca8a5d}{OSTM::Set\_Can\_Commit}(\textcolor{keywordtype}{bool} \hyperlink{class_o_s_t_m_a2a5b89641af274ddc69bdf8c1c1a07d6_a2a5b89641af274ddc69bdf8c1c1a07d6}{canCommit}) \{
00118     \textcolor{comment}{/* @119 set canCommit object variable to parameter boolean value*/}
00119     this->canCommit = \hyperlink{class_o_s_t_m_a2a5b89641af274ddc69bdf8c1c1a07d6_a2a5b89641af274ddc69bdf8c1c1a07d6}{canCommit};
00120 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00124}{}\hyperlink{class_o_s_t_m_a8df39ced3b401aa466df97e26d14b1b7_a8df39ced3b401aa466df97e26d14b1b7}{00124} \textcolor{keywordtype}{bool} \hyperlink{class_o_s_t_m_a8df39ced3b401aa466df97e26d14b1b7_a8df39ced3b401aa466df97e26d14b1b7}{OSTM::Is\_Can\_Commit}()\textcolor{keyword}{ const }\{
00125     \textcolor{comment}{/* @126 return canCommit boolean value TRUE/FALSE */}
00126     \textcolor{keywordflow}{return} \hyperlink{class_o_s_t_m_a2a5b89641af274ddc69bdf8c1c1a07d6_a2a5b89641af274ddc69bdf8c1c1a07d6}{canCommit};
00127 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00132}{}\hyperlink{class_o_s_t_m_aba384cf65c5f56f5b86833730c3c6ea4_aba384cf65c5f56f5b86833730c3c6ea4}{00132} \textcolor{keywordtype}{void} \hyperlink{class_o_s_t_m_aba384cf65c5f56f5b86833730c3c6ea4_aba384cf65c5f56f5b86833730c3c6ea4}{OSTM::Set\_Abort\_Transaction}(\textcolor{keywordtype}{bool} abortTransaction) \{
00133     \textcolor{comment}{/* @134 set abort\_Transaction object variable to parameter boolean value  */}
00134     this->\hyperlink{class_o_s_t_m_a5121d9c4b08320b26beca82ba2f85c4a_a5121d9c4b08320b26beca82ba2f85c4a}{abort\_Transaction} = abortTransaction;
00135 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00140}{}\hyperlink{class_o_s_t_m_afc2851abf5342c3c67342c2c14820115_afc2851abf5342c3c67342c2c14820115}{00140} \textcolor{keywordtype}{bool} \hyperlink{class_o_s_t_m_afc2851abf5342c3c67342c2c14820115_afc2851abf5342c3c67342c2c14820115}{OSTM::Is\_Abort\_Transaction}()\textcolor{keyword}{ const }\{
00141     \textcolor{comment}{/* @142 return abort\_Transaction object boolean value */}
00142     \textcolor{keywordflow}{return} \hyperlink{class_o_s_t_m_a5121d9c4b08320b26beca82ba2f85c4a_a5121d9c4b08320b26beca82ba2f85c4a}{abort\_Transaction};
00143 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00147}{}\hyperlink{class_o_s_t_m_af192c598a3c647f37aaba5757e60240f_af192c598a3c647f37aaba5757e60240f}{00147} \textcolor{keywordtype}{void} \hyperlink{class_o_s_t_m_af192c598a3c647f37aaba5757e60240f_af192c598a3c647f37aaba5757e60240f}{OSTM::lock\_Mutex}() \{
00148     \textcolor{comment}{/* @149 Locking the mutex*/}
00149     this->\hyperlink{class_o_s_t_m_aaab0921fd1564b793f882a5002ec7106_aaab0921fd1564b793f882a5002ec7106}{mutex}.lock();
00150 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00154}{}\hyperlink{class_o_s_t_m_a6cd703bc26c719fd95b4f5362d050762_a6cd703bc26c719fd95b4f5362d050762}{00154} \textcolor{keywordtype}{void} \hyperlink{class_o_s_t_m_a6cd703bc26c719fd95b4f5362d050762_a6cd703bc26c719fd95b4f5362d050762}{OSTM::unlock\_Mutex}() \{
00155     \textcolor{comment}{/* @156 Locking the mutex */}
00156     this->\hyperlink{class_o_s_t_m_aaab0921fd1564b793f882a5002ec7106_aaab0921fd1564b793f882a5002ec7106}{mutex}.unlock();
00157 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00162}{}\hyperlink{class_o_s_t_m_af3dd41488087b678c95b2f5c16486947_af3dd41488087b678c95b2f5c16486947}{00162} \textcolor{keywordtype}{bool} \hyperlink{class_o_s_t_m_af3dd41488087b678c95b2f5c16486947_af3dd41488087b678c95b2f5c16486947}{OSTM::try\_lock}()\{
00163     \textcolor{comment}{/* @164 Try to unlock the mutex, return TRUE if the lock was acquired successfully, otherwise return
       FALSE */}
00164     \textcolor{keywordflow}{return} this->\hyperlink{class_o_s_t_m_aaab0921fd1564b793f882a5002ec7106_aaab0921fd1564b793f882a5002ec7106}{mutex}.try\_lock();
00165 \}
\end{DoxyCode}
