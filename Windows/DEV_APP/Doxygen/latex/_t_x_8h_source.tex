\hypertarget{_t_x_8h_source}{}\subsection{T\+X.\+h}

\begin{DoxyCode}
00001 \textcolor{comment}{/* }
00002 \textcolor{comment}{ * File:   TX.h}
00003 \textcolor{comment}{ * Author: Zoltan Fuzesi}
00004 \textcolor{comment}{ * }
00005 \textcolor{comment}{ * Created on December 18, 2017, 2:09 PM}
00006 \textcolor{comment}{ * Transaction class fields and methods declarations}
00007 \textcolor{comment}{ */}
00008 
00009 \textcolor{preprocessor}{#ifndef TX\_H}
00010 \textcolor{preprocessor}{#define TX\_H}
00011 \textcolor{preprocessor}{#include <cstdlib>}
00012 \textcolor{preprocessor}{#include <utility>}
00013 \textcolor{preprocessor}{#include <map>}
00014 \textcolor{preprocessor}{#include <iostream>}
00015 \textcolor{preprocessor}{#include <mutex>}
00016 \textcolor{preprocessor}{#include <process.h>} 
00017 \textcolor{preprocessor}{#include <memory>}
00018 \textcolor{preprocessor}{#include <stdio.h>}
00019 \textcolor{preprocessor}{#include <thread>}
00020 \textcolor{preprocessor}{#include "\hyperlink{_o_s_t_m_8h}{OSTM.h}"}
00021 
00022 \textcolor{keyword}{class }TM;
00023 
\hypertarget{_t_x_8h_source.tex_l00024}{}\hyperlink{_t_x_8h_aff6924a1418627017270c5afe0db9399}{00024} \textcolor{keyword}{class }\textcolor{keyword}{\_\_declspec(dllexport)} TX \{
00025 \textcolor{keyword}{public}:
00029     TX(std::thread::id \textcolor{keywordtype}{id});
00033     ~TX();
00037     TX(\textcolor{keyword}{const} TX& orig);
00041     \textcolor{keywordtype}{void} ostm\_exit();
00042     
00046     \textcolor{keywordtype}{void} \_register(std::shared\_ptr<OSTM>  \textcolor{keywordtype}{object});
00050     std::shared\_ptr<OSTM>  load(std::shared\_ptr<OSTM>  \textcolor{keywordtype}{object});
00054     \textcolor{keywordtype}{void} store(std::shared\_ptr<OSTM>  \textcolor{keywordtype}{object});
00058     \textcolor{keywordtype}{bool} commit();
00062     \textcolor{keywordtype}{void} \_increase\_tx\_nesting();
00066     \textcolor{keywordtype}{void} \_decrease\_tx\_nesting();
00070     \textcolor{keyword}{friend} \textcolor{keyword}{class }TM;
00071     \textcolor{comment}{/*}
00072 \textcolor{comment}{     * \(\backslash\)brief ONLY FOR TESTING!!! returning the number of rollback happened during transactions}
00073 \textcolor{comment}{     */}
00074     \textcolor{keywordtype}{int} getTest\_counter();
00078     \textcolor{keyword}{static} \textcolor{keywordtype}{int} test\_counter;
00079     \textcolor{comment}{/*}
00080 \textcolor{comment}{     * TESTING ONLY}
00081 \textcolor{comment}{     */}
00082     \textcolor{keywordtype}{void} \_print\_all\_tx() ;
00083 
00084 
00085 \textcolor{keyword}{private}:
00090     std::map< int, std::shared\_ptr<OSTM>  > working\_Map\_collection;
00096     std::thread::id transaction\_Number;
00100     \textcolor{keywordtype}{int} \_tx\_nesting\_level;
00101     
00106     \textcolor{keyword}{static} std::map<int, std::shared\_ptr<OSTM>  >main\_Process\_Map\_collection;
00111     \textcolor{keyword}{static} std::map<int, std::map< int, int >> process\_map\_collection;
00112     \textcolor{comment}{//static std::map<pid\_t, std::map< int, std::pair<ppid, int>  >> process\_map\_collection;}
00116 \textcolor{comment}{}    std::map< int , int > get\_thread\_Map();
00120     \textcolor{keyword}{static} std::mutex register\_Lock;
00124     \textcolor{keyword}{const} std::thread::id \_get\_tx\_number() \textcolor{keyword}{const};
00125    
00129     \textcolor{keywordtype}{void} \_release\_object\_lock();
00133     \textcolor{keywordtype}{void} th\_exit();
00134     
00135     
00136 
00137 \};
00138 \textcolor{preprocessor}{#endif // \_TX\_H\_}
\end{DoxyCode}
