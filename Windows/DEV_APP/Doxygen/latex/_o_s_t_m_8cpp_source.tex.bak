\hypertarget{_o_s_t_m_8cpp_source}{}\subsection{O\+S\+T\+M.\+cpp}

\begin{DoxyCode}
00001 \textcolor{comment}{/* }
00002 \textcolor{comment}{ * File:   OSTM.cpp}
00003 \textcolor{comment}{ * Author: Zoltan Fuzesi}
00004 \textcolor{comment}{ * }
00005 \textcolor{comment}{ * Created on December 18, 2017, 2:09 PM}
00006 \textcolor{comment}{ * OSTM cpp file methods implementations}
00007 \textcolor{comment}{ */}
00008 
00009 \textcolor{preprocessor}{#include "\hyperlink{_o_s_t_m_8h}{OSTM.h}"}
00010 
00011 \textcolor{keywordtype}{int} OSTM::global\_Unique\_ID\_Number = 0;
00012 
00020 OSTM::OSTM()
00021 \{
00022     this->version = ZERO;
00023     this->uniqueID = Get\_global\_Unique\_ID\_Number(); \textcolor{comment}{//++global\_Unique\_ID\_Number;}
00024     this->canCommit = \textcolor{keyword}{true};
00025     this->abort\_Transaction = \textcolor{keyword}{false};
00026 \}
00027 
00028 
00036 OSTM::OSTM(\textcolor{keywordtype}{int} \_version\_number\_, \textcolor{keywordtype}{int} \_unique\_id\_)
00037 \{
00038    \textcolor{comment}{// std::cout << "OSTM COPY CONSTRUCTOR" << global\_Unique\_ID\_Number << std::endl;}
00039     this->uniqueID = \_unique\_id\_;
00040     this->version = \_version\_number\_;
00041     this->canCommit = \textcolor{keyword}{true};
00042     this->abort\_Transaction = \textcolor{keyword}{false};
00043 \}
00044 
00048 OSTM::~OSTM() \{
00049     \textcolor{comment}{//std::cout << "[OSTM DELETE]" << std::endl;}
00050 \}
00056 \textcolor{keywordtype}{int} OSTM::Get\_global\_Unique\_ID\_Number() \{
00057     \textcolor{keywordflow}{if}(global\_Unique\_ID\_Number > 10000000)
00058         global\_Unique\_ID\_Number = 0;
00059     \textcolor{keywordflow}{return} ++global\_Unique\_ID\_Number;
00060 \}
00061 
00066 \textcolor{keywordtype}{void} OSTM::Set\_Unique\_ID(\textcolor{keywordtype}{int} uniqueID) \{
00067     this->uniqueID = uniqueID;
00068 \}
00073 \textcolor{keywordtype}{int} OSTM::Get\_Unique\_ID()\textcolor{keyword}{ const}
00074 \textcolor{keyword}{}\{
00075     \textcolor{keywordflow}{return} uniqueID;
00076 \}
00081 \textcolor{keywordtype}{void} OSTM::Set\_Version(\textcolor{keywordtype}{int} version)
00082 \{
00083     this->version = version;
00084 \}
00089 \textcolor{keywordtype}{int} OSTM::Get\_Version()\textcolor{keyword}{ const}
00090 \textcolor{keyword}{}\{
00091     \textcolor{keywordflow}{return} version;
00092 \}
00097 \textcolor{keywordtype}{void} OSTM::increase\_VersionNumber()
00098 \{
00099     this->version += 1;
00100 \}
00105 \textcolor{keywordtype}{void} OSTM::Set\_Can\_Commit(\textcolor{keywordtype}{bool} canCommit) \{
00106     this->canCommit = canCommit;
00107 \}
00112 \textcolor{keywordtype}{bool} OSTM::Is\_Can\_Commit()\textcolor{keyword}{ const }\{
00113     \textcolor{keywordflow}{return} canCommit;
00114 \}
00119 \textcolor{keywordtype}{void} OSTM::Set\_Abort\_Transaction(\textcolor{keywordtype}{bool} abortTransaction) \{
00120     this->abort\_Transaction = abortTransaction;
00121 \}
00126 \textcolor{keywordtype}{bool} OSTM::Is\_Abort\_Transaction()\textcolor{keyword}{ const }\{
00127     \textcolor{keywordflow}{return} abort\_Transaction;
00128 \}
00133 \textcolor{keywordtype}{void} OSTM::lock\_Mutex() \{
00134     this->mutex.lock();
00135 \}
00140 \textcolor{keywordtype}{void} OSTM::unlock\_Mutex() \{
00141     this->mutex.unlock();
00142 \}
00147 \textcolor{keywordtype}{bool} OSTM::is\_Locked()\{
00148     \textcolor{keywordflow}{return} this->mutex.try\_lock();
00149 \}
\end{DoxyCode}
