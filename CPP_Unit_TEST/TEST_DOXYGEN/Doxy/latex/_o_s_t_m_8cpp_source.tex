\hypertarget{_o_s_t_m_8cpp_source}{}\subsection{O\+S\+T\+M.\+cpp}

\begin{DoxyCode}
00001 \textcolor{comment}{/* }
00002 \textcolor{comment}{ * File:   OSTM.cpp}
00003 \textcolor{comment}{ * Author: Zoltan Fuzesi}
00004 \textcolor{comment}{ * }
00005 \textcolor{comment}{ * Created on December 18, 2017, 2:09 PM}
00006 \textcolor{comment}{ * OSTM cpp file methods implementations}
00007 \textcolor{comment}{ */}
00008 
00009 \textcolor{preprocessor}{#include "\hyperlink{_o_s_t_m_8h}{OSTM.h}"}
00010 
00011 \textcolor{keywordtype}{int} \hyperlink{class_o_s_t_m_acb617b9666d198c0de333c8613df0d4b_acb617b9666d198c0de333c8613df0d4b}{OSTM::global\_Unique\_ID\_Number} = 0;
00012 
\hypertarget{_o_s_t_m_8cpp_source.tex_l00020}{}\hyperlink{class_o_s_t_m_a968edf778668bd0ec7603f0571619196_a968edf778668bd0ec7603f0571619196}{00020} \hyperlink{class_o_s_t_m_a968edf778668bd0ec7603f0571619196_a968edf778668bd0ec7603f0571619196}{OSTM::OSTM}()
00021 \{
00022     this->\hyperlink{class_o_s_t_m_a9a6ea36181be2db7f9082d77956511d7_a9a6ea36181be2db7f9082d77956511d7}{version} = \hyperlink{class_o_s_t_m_a0bb6ae8411d25f8e7b82d0a61729ea89_a0bb6ae8411d25f8e7b82d0a61729ea89}{ZERO};
00023     this->\hyperlink{class_o_s_t_m_aa9fe59368b701af7f70befa23bd6901a_aa9fe59368b701af7f70befa23bd6901a}{uniqueID} = \hyperlink{class_o_s_t_m_adee6903c1100e0d78640bd4b85e5d7df_adee6903c1100e0d78640bd4b85e5d7df}{Get\_global\_Unique\_ID\_Number}(); \textcolor{comment}{//
      ++global\_Unique\_ID\_Number;}
00024     this->\hyperlink{class_o_s_t_m_a2a5b89641af274ddc69bdf8c1c1a07d6_a2a5b89641af274ddc69bdf8c1c1a07d6}{canCommit} = \textcolor{keyword}{true};
00025     this->\hyperlink{class_o_s_t_m_a5121d9c4b08320b26beca82ba2f85c4a_a5121d9c4b08320b26beca82ba2f85c4a}{abort\_Transaction} = \textcolor{keyword}{false};
00026 \}
00027 
00028 
\hypertarget{_o_s_t_m_8cpp_source.tex_l00036}{}\hyperlink{class_o_s_t_m_a2314f55a127b94aa8a51d19ba798401e_a2314f55a127b94aa8a51d19ba798401e}{00036} \hyperlink{class_o_s_t_m_a968edf778668bd0ec7603f0571619196_a968edf778668bd0ec7603f0571619196}{OSTM::OSTM}(\textcolor{keywordtype}{int} \_version\_number\_, \textcolor{keywordtype}{int} \_unique\_id\_)
00037 \{
00038    \textcolor{comment}{// std::cout << "OSTM COPY CONSTRUCTOR" << global\_Unique\_ID\_Number << std::endl;}
00039     this->\hyperlink{class_o_s_t_m_aa9fe59368b701af7f70befa23bd6901a_aa9fe59368b701af7f70befa23bd6901a}{uniqueID} = \_unique\_id\_;
00040     this->\hyperlink{class_o_s_t_m_a9a6ea36181be2db7f9082d77956511d7_a9a6ea36181be2db7f9082d77956511d7}{version} = \_version\_number\_;
00041     this->\hyperlink{class_o_s_t_m_a2a5b89641af274ddc69bdf8c1c1a07d6_a2a5b89641af274ddc69bdf8c1c1a07d6}{canCommit} = \textcolor{keyword}{true};
00042     this->\hyperlink{class_o_s_t_m_a5121d9c4b08320b26beca82ba2f85c4a_a5121d9c4b08320b26beca82ba2f85c4a}{abort\_Transaction} = \textcolor{keyword}{false};
00043 \}
00044 
\hypertarget{_o_s_t_m_8cpp_source.tex_l00048}{}\hyperlink{class_o_s_t_m_a30a17d73d0259c60eeab72d6dfa9ceb1_a30a17d73d0259c60eeab72d6dfa9ceb1}{00048} \hyperlink{class_o_s_t_m_a30a17d73d0259c60eeab72d6dfa9ceb1_a30a17d73d0259c60eeab72d6dfa9ceb1}{OSTM::~OSTM}() \{
00049     \textcolor{comment}{//std::cout << "[OSTM DELETE]" << std::endl;}
00050 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00056}{}\hyperlink{class_o_s_t_m_adee6903c1100e0d78640bd4b85e5d7df_adee6903c1100e0d78640bd4b85e5d7df}{00056} \textcolor{keywordtype}{int} \hyperlink{class_o_s_t_m_adee6903c1100e0d78640bd4b85e5d7df_adee6903c1100e0d78640bd4b85e5d7df}{OSTM::Get\_global\_Unique\_ID\_Number}() \{
00057     \textcolor{keywordflow}{if}(\hyperlink{class_o_s_t_m_acb617b9666d198c0de333c8613df0d4b_acb617b9666d198c0de333c8613df0d4b}{global\_Unique\_ID\_Number} > 10000000)
00058         \hyperlink{class_o_s_t_m_acb617b9666d198c0de333c8613df0d4b_acb617b9666d198c0de333c8613df0d4b}{global\_Unique\_ID\_Number} = 0;
00059     \textcolor{keywordflow}{return} ++\hyperlink{class_o_s_t_m_acb617b9666d198c0de333c8613df0d4b_acb617b9666d198c0de333c8613df0d4b}{global\_Unique\_ID\_Number};
00060 \}
00061 
\hypertarget{_o_s_t_m_8cpp_source.tex_l00066}{}\hyperlink{class_o_s_t_m_ab5019a32185631c08abbf826422f2d93_ab5019a32185631c08abbf826422f2d93}{00066} \textcolor{keywordtype}{void} \hyperlink{class_o_s_t_m_ab5019a32185631c08abbf826422f2d93_ab5019a32185631c08abbf826422f2d93}{OSTM::Set\_Unique\_ID}(\textcolor{keywordtype}{int} \hyperlink{class_o_s_t_m_aa9fe59368b701af7f70befa23bd6901a_aa9fe59368b701af7f70befa23bd6901a}{uniqueID}) \{
00067     this->uniqueID = \hyperlink{class_o_s_t_m_aa9fe59368b701af7f70befa23bd6901a_aa9fe59368b701af7f70befa23bd6901a}{uniqueID};
00068 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00073}{}\hyperlink{class_o_s_t_m_a5a01a8b98d16b1d1904ecf9356e7b71d_a5a01a8b98d16b1d1904ecf9356e7b71d}{00073} \textcolor{keywordtype}{int} \hyperlink{class_o_s_t_m_a5a01a8b98d16b1d1904ecf9356e7b71d_a5a01a8b98d16b1d1904ecf9356e7b71d}{OSTM::Get\_Unique\_ID}()\textcolor{keyword}{ const}
00074 \textcolor{keyword}{}\{
00075     \textcolor{keywordflow}{return} \hyperlink{class_o_s_t_m_aa9fe59368b701af7f70befa23bd6901a_aa9fe59368b701af7f70befa23bd6901a}{uniqueID};
00076 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00081}{}\hyperlink{class_o_s_t_m_a9529ad8d6d28c1f0cc9b86ed91df1ae1_a9529ad8d6d28c1f0cc9b86ed91df1ae1}{00081} \textcolor{keywordtype}{void} \hyperlink{class_o_s_t_m_a9529ad8d6d28c1f0cc9b86ed91df1ae1_a9529ad8d6d28c1f0cc9b86ed91df1ae1}{OSTM::Set\_Version}(\textcolor{keywordtype}{int} \hyperlink{class_o_s_t_m_a9a6ea36181be2db7f9082d77956511d7_a9a6ea36181be2db7f9082d77956511d7}{version})
00082 \{
00083     this->version = \hyperlink{class_o_s_t_m_a9a6ea36181be2db7f9082d77956511d7_a9a6ea36181be2db7f9082d77956511d7}{version};
00084 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00089}{}\hyperlink{class_o_s_t_m_a1f1db9d482f22c8e7caa17dfb340626b_a1f1db9d482f22c8e7caa17dfb340626b}{00089} \textcolor{keywordtype}{int} \hyperlink{class_o_s_t_m_a1f1db9d482f22c8e7caa17dfb340626b_a1f1db9d482f22c8e7caa17dfb340626b}{OSTM::Get\_Version}()\textcolor{keyword}{ const}
00090 \textcolor{keyword}{}\{
00091     \textcolor{keywordflow}{return} \hyperlink{class_o_s_t_m_a9a6ea36181be2db7f9082d77956511d7_a9a6ea36181be2db7f9082d77956511d7}{version};
00092 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00097}{}\hyperlink{class_o_s_t_m_a5f90caa4384d371c16b7cac860d9f89a_a5f90caa4384d371c16b7cac860d9f89a}{00097} \textcolor{keywordtype}{void} \hyperlink{class_o_s_t_m_a5f90caa4384d371c16b7cac860d9f89a_a5f90caa4384d371c16b7cac860d9f89a}{OSTM::increase\_VersionNumber}()
00098 \{
00099     this->\hyperlink{class_o_s_t_m_a9a6ea36181be2db7f9082d77956511d7_a9a6ea36181be2db7f9082d77956511d7}{version} += 1;
00100 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00105}{}\hyperlink{class_o_s_t_m_a813ee61c9d1c83c6a6ae30d12aca8a5d_a813ee61c9d1c83c6a6ae30d12aca8a5d}{00105} \textcolor{keywordtype}{void} \hyperlink{class_o_s_t_m_a813ee61c9d1c83c6a6ae30d12aca8a5d_a813ee61c9d1c83c6a6ae30d12aca8a5d}{OSTM::Set\_Can\_Commit}(\textcolor{keywordtype}{bool} \hyperlink{class_o_s_t_m_a2a5b89641af274ddc69bdf8c1c1a07d6_a2a5b89641af274ddc69bdf8c1c1a07d6}{canCommit}) \{
00106     this->canCommit = \hyperlink{class_o_s_t_m_a2a5b89641af274ddc69bdf8c1c1a07d6_a2a5b89641af274ddc69bdf8c1c1a07d6}{canCommit};
00107 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00112}{}\hyperlink{class_o_s_t_m_a8df39ced3b401aa466df97e26d14b1b7_a8df39ced3b401aa466df97e26d14b1b7}{00112} \textcolor{keywordtype}{bool} \hyperlink{class_o_s_t_m_a8df39ced3b401aa466df97e26d14b1b7_a8df39ced3b401aa466df97e26d14b1b7}{OSTM::Is\_Can\_Commit}()\textcolor{keyword}{ const }\{
00113     \textcolor{keywordflow}{return} \hyperlink{class_o_s_t_m_a2a5b89641af274ddc69bdf8c1c1a07d6_a2a5b89641af274ddc69bdf8c1c1a07d6}{canCommit};
00114 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00119}{}\hyperlink{class_o_s_t_m_aba384cf65c5f56f5b86833730c3c6ea4_aba384cf65c5f56f5b86833730c3c6ea4}{00119} \textcolor{keywordtype}{void} \hyperlink{class_o_s_t_m_aba384cf65c5f56f5b86833730c3c6ea4_aba384cf65c5f56f5b86833730c3c6ea4}{OSTM::Set\_Abort\_Transaction}(\textcolor{keywordtype}{bool} abortTransaction) \{
00120     this->\hyperlink{class_o_s_t_m_a5121d9c4b08320b26beca82ba2f85c4a_a5121d9c4b08320b26beca82ba2f85c4a}{abort\_Transaction} = abortTransaction;
00121 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00126}{}\hyperlink{class_o_s_t_m_afc2851abf5342c3c67342c2c14820115_afc2851abf5342c3c67342c2c14820115}{00126} \textcolor{keywordtype}{bool} \hyperlink{class_o_s_t_m_afc2851abf5342c3c67342c2c14820115_afc2851abf5342c3c67342c2c14820115}{OSTM::Is\_Abort\_Transaction}()\textcolor{keyword}{ const }\{
00127     \textcolor{keywordflow}{return} \hyperlink{class_o_s_t_m_a5121d9c4b08320b26beca82ba2f85c4a_a5121d9c4b08320b26beca82ba2f85c4a}{abort\_Transaction};
00128 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00133}{}\hyperlink{class_o_s_t_m_af192c598a3c647f37aaba5757e60240f_af192c598a3c647f37aaba5757e60240f}{00133} \textcolor{keywordtype}{void} \hyperlink{class_o_s_t_m_af192c598a3c647f37aaba5757e60240f_af192c598a3c647f37aaba5757e60240f}{OSTM::lock\_Mutex}() \{
00134     this->\hyperlink{class_o_s_t_m_aaab0921fd1564b793f882a5002ec7106_aaab0921fd1564b793f882a5002ec7106}{mutex}.lock();
00135 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00140}{}\hyperlink{class_o_s_t_m_a6cd703bc26c719fd95b4f5362d050762_a6cd703bc26c719fd95b4f5362d050762}{00140} \textcolor{keywordtype}{void} \hyperlink{class_o_s_t_m_a6cd703bc26c719fd95b4f5362d050762_a6cd703bc26c719fd95b4f5362d050762}{OSTM::unlock\_Mutex}() \{
00141     this->\hyperlink{class_o_s_t_m_aaab0921fd1564b793f882a5002ec7106_aaab0921fd1564b793f882a5002ec7106}{mutex}.unlock();
00142 \}
\hypertarget{_o_s_t_m_8cpp_source.tex_l00147}{}\hyperlink{class_o_s_t_m_afb6520023ed2c4a6188b688c46f192d0_afb6520023ed2c4a6188b688c46f192d0}{00147} \textcolor{keywordtype}{bool} \hyperlink{class_o_s_t_m_afb6520023ed2c4a6188b688c46f192d0_afb6520023ed2c4a6188b688c46f192d0}{OSTM::is\_Locked}()\{
00148     \textcolor{keywordflow}{return} this->\hyperlink{class_o_s_t_m_aaab0921fd1564b793f882a5002ec7106_aaab0921fd1564b793f882a5002ec7106}{mutex}.try\_lock();
00149 \}
\end{DoxyCode}
