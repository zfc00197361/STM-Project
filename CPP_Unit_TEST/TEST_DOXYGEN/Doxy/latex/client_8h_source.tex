\hypertarget{client_8h_source}{}\subsection{client.\+h}

\begin{DoxyCode}
00001 \textcolor{comment}{/*}
00002 \textcolor{comment}{ * To change this license header, choose License Headers in Project Properties.}
00003 \textcolor{comment}{ * To change this template file, choose Tools | Templates}
00004 \textcolor{comment}{ * and open the template in the editor.}
00005 \textcolor{comment}{ */}
00006 
00007 \textcolor{comment}{/*}
00008 \textcolor{comment}{ * File:   main.cpp}
00009 \textcolor{comment}{ * Author: zoltan}
00010 \textcolor{comment}{ *}
00011 \textcolor{comment}{ * Created on November 27, 2017, 9:26 PM}
00012 \textcolor{comment}{ */}
00013 
00014 \textcolor{preprocessor}{#include <cstdlib>}
00015 \textcolor{preprocessor}{#include <iostream>}
00016 \textcolor{preprocessor}{#include <thread>}
00017 
00018 \textcolor{preprocessor}{#include "\hyperlink{_t_m_8h}{TM.h}"}
00019 \textcolor{preprocessor}{#include "\hyperlink{_a_i_b_8h}{AIB.h}"}    \textcolor{comment}{//Bank Account}
00020 \textcolor{preprocessor}{#include "\hyperlink{_b_o_i_8h}{BOI.h}"}    \textcolor{comment}{//Bank Account}
00021 \textcolor{preprocessor}{#include "\hyperlink{_b_o_a_8h}{BOA.h}"}    \textcolor{comment}{//Bank Account}
00022 \textcolor{preprocessor}{#include "\hyperlink{_s_w_b_p_l_c_8h}{SWBPLC.h}"} \textcolor{comment}{//Bank Account}
00023 \textcolor{preprocessor}{#include "\hyperlink{_u_l_s_t_e_r_8h}{ULSTER.h}"} \textcolor{comment}{//Bank Account}
00024 \textcolor{preprocessor}{#include "\hyperlink{_u_n_b_l_8h}{UNBL.h}"}   \textcolor{comment}{//Bank Account}
00025 \textcolor{preprocessor}{#include <mutex>}
00026 \textcolor{preprocessor}{#include <memory>}
00027 \textcolor{preprocessor}{#include <condition\_variable>}
00028 \textcolor{preprocessor}{#include <vector>}
00029 
00030 
00031 \textcolor{preprocessor}{#ifndef CLIENT\_H}
\hypertarget{client_8h_source.tex_l00032}{}\hyperlink{client_8h_a1fa906461dbe27288865313d90234ec2_a1fa906461dbe27288865313d90234ec2}{00032} \textcolor{preprocessor}{#define CLIENT\_H}
00033 
\hypertarget{client_8h_source.tex_l00034}{}\hyperlink{classclient}{00034} \textcolor{keyword}{class }\hyperlink{classclient}{client} \{
00035 \textcolor{keyword}{private}:
00036       
00037 \textcolor{keyword}{public}:
\hypertarget{client_8h_source.tex_l00038}{}\hyperlink{classclient_a30e2070077d9ba875bfa6616a43d879c_a30e2070077d9ba875bfa6616a43d879c}{00038}     \textcolor{keywordtype}{int} \hyperlink{classclient_a30e2070077d9ba875bfa6616a43d879c_a30e2070077d9ba875bfa6616a43d879c}{value} = 0;
\hypertarget{client_8h_source.tex_l00039}{}\hyperlink{classclient_a62e0309db8390260d05d8c3084c6fdd4_a62e0309db8390260d05d8c3084c6fdd4}{00039}     \hyperlink{classclient_a62e0309db8390260d05d8c3084c6fdd4_a62e0309db8390260d05d8c3084c6fdd4}{client}(\textcolor{keywordtype}{int} value)\{ this->value = \hyperlink{classclient_a30e2070077d9ba875bfa6616a43d879c_a30e2070077d9ba875bfa6616a43d879c}{value}; \};
00040 
\hypertarget{client_8h_source.tex_l00041}{}\hyperlink{classclient_a71edd1265ba9ae03f71b5dbf54548696_a71edd1265ba9ae03f71b5dbf54548696}{00041}     \textcolor{keywordtype}{void} \hyperlink{classclient_a71edd1265ba9ae03f71b5dbf54548696_a71edd1265ba9ae03f71b5dbf54548696}{\_two\_account\_transfer\_}(std::shared\_ptr<OSTM> \_to\_, std::shared\_ptr<OSTM> 
      \_from\_, \hyperlink{class_t_m}{TM}& tm, \textcolor{keywordtype}{double} \_amount) \{
00042 
00043     std::shared\_ptr<TX> tx = tm.\hyperlink{class_t_m_a41cb0226cc4080c931651b13f74a0075_a41cb0226cc4080c931651b13f74a0075}{\_get\_tx}();
00044     \textcolor{comment}{/*}
00045 \textcolor{comment}{     * Register the two single account}
00046 \textcolor{comment}{     */}
00047     tx->\_register(\_to\_);
00048     tx->\_register(\_from\_);
00049     \textcolor{comment}{/*}
00050 \textcolor{comment}{     * Declare required pointers }
00051 \textcolor{comment}{     */}
00052     std::shared\_ptr<BANK> \_TO\_BANK\_, \_FROM\_BANK\_;
00053     std::shared\_ptr<OSTM> \_TO\_OSTM\_, \_FROM\_OSTM\_;
00054 
00055     \textcolor{keywordtype}{bool} done = \textcolor{keyword}{false};
00056     \textcolor{keywordflow}{try} \{
00057         \textcolor{keywordflow}{while} (!done) \{
00058             \textcolor{comment}{/*}
00059 \textcolor{comment}{             * From std::shared\_ptr<OSTM> to std::shared\_ptr<BANK> to access the virtual methods}
00060 \textcolor{comment}{             */}
00061             \_TO\_BANK\_ = std::dynamic\_pointer\_cast<\hyperlink{class_b_a_n_k}{BANK}> (tx->load(\_to\_));
00062             \_FROM\_BANK\_ = std::dynamic\_pointer\_cast<\hyperlink{class_b_a_n_k}{BANK}> (tx->load(\_from\_));
00063             \textcolor{comment}{/*}
00064 \textcolor{comment}{             * Make changes with the objects}
00065 \textcolor{comment}{             */}
00066             \_TO\_BANK\_->\hyperlink{class_b_a_n_k_ae3e45b407bf8ec7175662442ea24b7c0_ae3e45b407bf8ec7175662442ea24b7c0}{SetBalance}(\_TO\_BANK\_->GetBalance() + \_amount);
00067             \_FROM\_BANK\_->SetBalance(\_FROM\_BANK\_->GetBalance() - \_amount);
00068             \textcolor{comment}{/*}
00069 \textcolor{comment}{             * From std::shared\_ptr<BANK> to std::shared\_ptr<OSTM> to store the memory spaces}
00070 \textcolor{comment}{             */}
00071             \_TO\_OSTM\_ = std::dynamic\_pointer\_cast<\hyperlink{class_o_s_t_m}{OSTM}> (\_TO\_BANK\_);
00072             \_FROM\_OSTM\_ = std::dynamic\_pointer\_cast<\hyperlink{class_o_s_t_m}{OSTM}> (\_FROM\_BANK\_);
00073             \textcolor{comment}{/*}
00074 \textcolor{comment}{             * Store changes}
00075 \textcolor{comment}{             */}
00076             tx->store(\_TO\_OSTM\_);
00077             tx->store(\_FROM\_OSTM\_);
00078 
00079             \textcolor{comment}{/*}
00080 \textcolor{comment}{             * Commit changes}
00081 \textcolor{comment}{             */}
00082             done = tx->commit();
00083         \}
00084     \} \textcolor{keywordflow}{catch} (std::runtime\_error& e) \{
00085         std::cout << e.what() << std::endl;
00086     \}
00087 \}
00088 
\hypertarget{client_8h_source.tex_l00089}{}\hyperlink{classclient_ac0ebebd379895869c22f8919ad3bd37f_ac0ebebd379895869c22f8919ad3bd37f}{00089} \textcolor{keywordtype}{void} \hyperlink{classclient_ac0ebebd379895869c22f8919ad3bd37f_ac0ebebd379895869c22f8919ad3bd37f}{\_nesting\_}(std::shared\_ptr<OSTM> \_to\_, std::shared\_ptr<OSTM> \_from\_, 
      \hyperlink{class_t_m}{TM}& tm, \textcolor{keywordtype}{double} \_amount) \{
00090     std::shared\_ptr<TX> tx = tm.\hyperlink{class_t_m_a41cb0226cc4080c931651b13f74a0075_a41cb0226cc4080c931651b13f74a0075}{\_get\_tx}();
00091     \textcolor{comment}{/*}
00092 \textcolor{comment}{     * Register the two single account}
00093 \textcolor{comment}{     */}
00094     tx->\_register(\_to\_);
00095     tx->\_register(\_from\_);
00096     \textcolor{comment}{/*}
00097 \textcolor{comment}{     * Declare required pointers }
00098 \textcolor{comment}{     */}
00099     std::shared\_ptr<BANK> \_TO\_BANK\_, \_FROM\_BANK\_;
00100     std::shared\_ptr<OSTM> \_TO\_OSTM\_, \_FROM\_OSTM\_;
00101 
00102 
00103     \textcolor{keywordtype}{bool} done = \textcolor{keyword}{false};
00104     \textcolor{keywordflow}{try} \{
00105         \textcolor{keywordflow}{while} (!done) \{
00106             \textcolor{comment}{/*}
00107 \textcolor{comment}{             * From std::shared\_ptr<OSTM> to std::shared\_ptr<BANK> to access the virtual methods}
00108 \textcolor{comment}{             */}
00109             \_TO\_BANK\_ = std::dynamic\_pointer\_cast<\hyperlink{class_b_a_n_k}{BANK}> (tx->load(\_to\_));
00110             \_FROM\_BANK\_ = std::dynamic\_pointer\_cast<\hyperlink{class_b_a_n_k}{BANK}> (tx->load(\_from\_));
00111             \textcolor{comment}{/*}
00112 \textcolor{comment}{             * Make changes with the objects}
00113 \textcolor{comment}{             */}
00114             \_TO\_BANK\_->\hyperlink{class_b_a_n_k_ae3e45b407bf8ec7175662442ea24b7c0_ae3e45b407bf8ec7175662442ea24b7c0}{SetBalance}(\_TO\_BANK\_->GetBalance() + \_amount);
00115             \_FROM\_BANK\_->SetBalance(\_FROM\_BANK\_->GetBalance() - \_amount);
00116             \textcolor{comment}{/*}
00117 \textcolor{comment}{             * From std::shared\_ptr<BANK> to std::shared\_ptr<OSTM> to store the memory spaces}
00118 \textcolor{comment}{             */}
00119             \_TO\_OSTM\_ = std::dynamic\_pointer\_cast<\hyperlink{class_o_s_t_m}{OSTM}> (\_TO\_BANK\_);
00120             \_FROM\_OSTM\_ = std::dynamic\_pointer\_cast<\hyperlink{class_o_s_t_m}{OSTM}> (\_FROM\_BANK\_);
00121             \textcolor{comment}{/*}
00122 \textcolor{comment}{             * Store changes}
00123 \textcolor{comment}{             */}
00124             tx->store(\_TO\_OSTM\_);
00125             tx->store(\_FROM\_OSTM\_);
00126 
00127             \textcolor{comment}{/*}
00128 \textcolor{comment}{             * NESTED TRANSACTION}
00129 \textcolor{comment}{             */}
00130             std::shared\_ptr<TX> txTwo = tm.\hyperlink{class_t_m_a41cb0226cc4080c931651b13f74a0075_a41cb0226cc4080c931651b13f74a0075}{\_get\_tx}();
00131 
00132             \textcolor{keywordtype}{bool} nestedDone = \textcolor{keyword}{false};
00133             \textcolor{keywordflow}{while} (!nestedDone) \{
00134                 \_TO\_BANK\_ = std::dynamic\_pointer\_cast<\hyperlink{class_b_a_n_k}{BANK}> (txTwo->load(\_to\_));
00135                 \_FROM\_BANK\_ = std::dynamic\_pointer\_cast<\hyperlink{class_b_a_n_k}{BANK}> (txTwo->load(\_from\_));
00136                 \textcolor{comment}{/*}
00137 \textcolor{comment}{                 * Make changes with the objects}
00138 \textcolor{comment}{                 */}
00139                 \_TO\_BANK\_->\hyperlink{class_b_a_n_k_ae3e45b407bf8ec7175662442ea24b7c0_ae3e45b407bf8ec7175662442ea24b7c0}{SetBalance}(\_TO\_BANK\_->GetBalance() + \_amount);
00140                 \_FROM\_BANK\_->SetBalance(\_FROM\_BANK\_->GetBalance() - \_amount);
00141                 \textcolor{comment}{/*}
00142 \textcolor{comment}{                 * From std::shared\_ptr<BANK> to std::shared\_ptr<OSTM> to store the memory spaces}
00143 \textcolor{comment}{                 */}
00144                 \_TO\_OSTM\_ = std::dynamic\_pointer\_cast<\hyperlink{class_o_s_t_m}{OSTM}> (\_TO\_BANK\_);
00145                 \_FROM\_OSTM\_ = std::dynamic\_pointer\_cast<\hyperlink{class_o_s_t_m}{OSTM}> (\_FROM\_BANK\_);
00146                 \textcolor{comment}{/*}
00147 \textcolor{comment}{                 * Store changes}
00148 \textcolor{comment}{                 */}
00149                 txTwo->store(\_TO\_OSTM\_);
00150                 txTwo->store(\_FROM\_OSTM\_);
00151                 \textcolor{comment}{/*}
00152 \textcolor{comment}{                 * NESTED TRANSACTION IN THE NESTED TRANSACTION}
00153 \textcolor{comment}{                 * \_two\_account\_transfer\_ function call}
00154 \textcolor{comment}{                 */}
00155                 \hyperlink{classclient_a71edd1265ba9ae03f71b5dbf54548696_a71edd1265ba9ae03f71b5dbf54548696}{\_two\_account\_transfer\_}(\_to\_, \_from\_, tm, \_amount);
00156 
00157                 nestedDone = txTwo->commit();
00158             \}
00159 
00160             \textcolor{comment}{/*}
00161 \textcolor{comment}{             * Commit changes}
00162 \textcolor{comment}{             */}
00163             done = tx->commit();
00164         \}
00165     \} \textcolor{keywordflow}{catch} (std::runtime\_error& e) \{
00166         std::cout << e.what() << std::endl;
00167     \}
00168 \}
00169 
\hypertarget{client_8h_source.tex_l00170}{}\hyperlink{classclient_a94fb0b42124860568a011ed94f8bc9d5_a94fb0b42124860568a011ed94f8bc9d5}{00170} \textcolor{keywordtype}{void} \hyperlink{classclient_a94fb0b42124860568a011ed94f8bc9d5_a94fb0b42124860568a011ed94f8bc9d5}{\_six\_account\_transfer\_}(std::shared\_ptr<OSTM> \_to\_, std::shared\_ptr<OSTM> 
      \_from\_one\_, std::shared\_ptr<OSTM> \_from\_two\_, std::shared\_ptr<OSTM> \_from\_three\_, std::shared\_ptr<OSTM> \_from\_four\_
      , std::shared\_ptr<OSTM> \_from\_five\_, \hyperlink{class_t_m}{TM}& \_tm, \textcolor{keywordtype}{double} \_amount) \{
00171     std::shared\_ptr<TX> tx = \_tm.\hyperlink{class_t_m_a41cb0226cc4080c931651b13f74a0075_a41cb0226cc4080c931651b13f74a0075}{\_get\_tx}();
00172     \textcolor{comment}{/*}
00173 \textcolor{comment}{     * Register the two single account}
00174 \textcolor{comment}{     */}
00175     tx->\_register(\_to\_);
00176     tx->\_register(\_from\_one\_);
00177     tx->\_register(\_from\_two\_);
00178     tx->\_register(\_from\_three\_);
00179     tx->\_register(\_from\_four\_);
00180     tx->\_register(\_from\_five\_);
00181 
00182     \textcolor{comment}{/*}
00183 \textcolor{comment}{     * Required pointers to use in transaction}
00184 \textcolor{comment}{     */}
00185     std::shared\_ptr<OSTM> \_TO\_OSTM, \_FROM\_ONE\_OSTM, \_FROM\_TWO\_OSTM, \_FROM\_THREE\_OSTM, \_FROM\_FOUR\_OSTM, 
      \_FROM\_FIVE\_OSTM;
00186     std::shared\_ptr<BANK> \_TO\_, \_FROM\_ONE\_, \_FROM\_TWO\_, \_FROM\_THREE\_, \_FROM\_FOUR\_, \_FROM\_FIVE\_;
00187     \textcolor{keywordflow}{try} \{
00188         \textcolor{keywordtype}{bool} done = \textcolor{keyword}{false};
00189         \textcolor{keywordflow}{while} (!done) \{
00190             \textcolor{comment}{/*}
00191 \textcolor{comment}{             * From std::shared\_ptr<OSTM> to std::shared\_ptr<BANK> to access the virtual methods}
00192 \textcolor{comment}{             */}
00193             \_TO\_ = std::dynamic\_pointer\_cast<\hyperlink{class_b_a_n_k}{BANK}> (tx->load(\_to\_));
00194             \_FROM\_ONE\_ = std::dynamic\_pointer\_cast<\hyperlink{class_b_a_n_k}{BANK}> (tx->load(\_from\_one\_));
00195             \_FROM\_TWO\_ = std::dynamic\_pointer\_cast<\hyperlink{class_b_a_n_k}{BANK}> (tx->load(\_from\_two\_));
00196             \_FROM\_THREE\_ = std::dynamic\_pointer\_cast<\hyperlink{class_b_a_n_k}{BANK}> (tx->load(\_from\_three\_));
00197             \_FROM\_FOUR\_ = std::dynamic\_pointer\_cast<\hyperlink{class_b_a_n_k}{BANK}> (tx->load(\_from\_four\_));
00198             \_FROM\_FIVE\_ = std::dynamic\_pointer\_cast<\hyperlink{class_b_a_n_k}{BANK}> (tx->load(\_from\_five\_));
00199             \textcolor{comment}{/*}
00200 \textcolor{comment}{             * Make changes with the objects}
00201 \textcolor{comment}{             */}
00202             \_TO\_->\hyperlink{class_b_a_n_k_ae3e45b407bf8ec7175662442ea24b7c0_ae3e45b407bf8ec7175662442ea24b7c0}{SetBalance}(\_TO\_->GetBalance() + (\_amount * 5));
00203             \_FROM\_ONE\_->SetBalance(\_FROM\_ONE\_->GetBalance() - \_amount);
00204             \_FROM\_TWO\_->SetBalance(\_FROM\_TWO\_->GetBalance() - \_amount);
00205             \_FROM\_THREE\_->SetBalance(\_FROM\_THREE\_->GetBalance() - \_amount);
00206             \_FROM\_FOUR\_->SetBalance(\_FROM\_FOUR\_->GetBalance() - \_amount);
00207             \_FROM\_FIVE\_->SetBalance(\_FROM\_FIVE\_->GetBalance() - \_amount);
00208             \textcolor{comment}{/*}
00209 \textcolor{comment}{             * From std::shared\_ptr<BANK> to std::shared\_ptr<OSTM> to store the memory spaces}
00210 \textcolor{comment}{             */}
00211             \_TO\_OSTM = std::dynamic\_pointer\_cast<\hyperlink{class_o_s_t_m}{OSTM}> (\_TO\_);
00212             \_FROM\_ONE\_OSTM = std::dynamic\_pointer\_cast<\hyperlink{class_o_s_t_m}{OSTM}> (\_FROM\_ONE\_);
00213             \_FROM\_TWO\_OSTM = std::dynamic\_pointer\_cast<\hyperlink{class_o_s_t_m}{OSTM}> (\_FROM\_TWO\_);
00214             \_FROM\_THREE\_OSTM = std::dynamic\_pointer\_cast<\hyperlink{class_o_s_t_m}{OSTM}> (\_FROM\_THREE\_);
00215             \_FROM\_FOUR\_OSTM = std::dynamic\_pointer\_cast<\hyperlink{class_o_s_t_m}{OSTM}> (\_FROM\_FOUR\_);
00216             \_FROM\_FIVE\_OSTM = std::dynamic\_pointer\_cast<\hyperlink{class_o_s_t_m}{OSTM}> (\_FROM\_FIVE\_);
00217             \textcolor{comment}{/*}
00218 \textcolor{comment}{             * Store changes}
00219 \textcolor{comment}{             */}
00220             tx->store(\_TO\_OSTM);
00221             tx->store(\_FROM\_ONE\_OSTM);
00222             tx->store(\_FROM\_TWO\_OSTM);
00223             tx->store(\_FROM\_THREE\_OSTM);
00224             tx->store(\_FROM\_FOUR\_OSTM);
00225             tx->store(\_FROM\_FIVE\_OSTM);
00226             \textcolor{comment}{/*}
00227 \textcolor{comment}{             * Commit changes}
00228 \textcolor{comment}{             */}
00229             done = tx->commit();
00230         \}
00231     \} \textcolor{keywordflow}{catch} (std::runtime\_error& e) \{
00232         std::cout << e.what() << std::endl;
00233     \}
00234 \}
00235 
\hypertarget{client_8h_source.tex_l00236}{}\hyperlink{classclient_a3c5e378b6df49d2d2eea4a073da5a594_a3c5e378b6df49d2d2eea4a073da5a594}{00236} \textcolor{keywordtype}{void} \hyperlink{classclient_a3c5e378b6df49d2d2eea4a073da5a594_a3c5e378b6df49d2d2eea4a073da5a594}{\_complex\_transfer\_}(std::shared\_ptr<OSTM> \_from\_, std::shared\_ptr<OSTM> \_from\_two\_, 
      std::vector<std::shared\_ptr<OSTM>> \_customer\_vec, \hyperlink{class_t_m}{TM}& \_tm, \textcolor{keywordtype}{double} \_amount) \{
00237     std::shared\_ptr<TX> tx = \_tm.\hyperlink{class_t_m_a41cb0226cc4080c931651b13f74a0075_a41cb0226cc4080c931651b13f74a0075}{\_get\_tx}();
00238     \textcolor{comment}{/* Register the two single account*/}
00239     tx->\_register(\_from\_);
00240     tx->\_register(\_from\_two\_);
00241     \textcolor{comment}{/* Declare required pointers */}
00242     std::shared\_ptr<OSTM> \_FROM\_OSTM\_ONE\_, \_FROM\_OSTM\_TWO\_, \_TO\_OSTM\_;
00243     std::shared\_ptr<BANK> \_FROM\_, \_FROM\_TWO\_, \_TO\_;
00244 
00245     \textcolor{keywordtype}{bool} done = \textcolor{keyword}{false};
00246     \textcolor{keywordflow}{try} \{
00247         \textcolor{keywordflow}{while} (!done) \{
00248             \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}&& obj : \_customer\_vec) \{
00249                 \textcolor{comment}{/* Register customers accounts from the collection (vector) */}
00250                 tx->\_register(obj);
00251                 \textcolor{comment}{/* From std::shared\_ptr<OSTM> to std::shared\_ptr<BANK> to access the virtual methods  */}
00252                 \_FROM\_ = std::dynamic\_pointer\_cast<\hyperlink{class_b_a_n_k}{BANK}> (tx->load(\_from\_));
00253                 \_FROM\_TWO\_ = std::dynamic\_pointer\_cast<\hyperlink{class_b_a_n_k}{BANK}> (tx->load(\_from\_two\_));
00254                 \_TO\_ = std::dynamic\_pointer\_cast<\hyperlink{class_b_a_n_k}{BANK}> (tx->load(obj));
00255                 \textcolor{comment}{/* Make changes with the objects */}
00256                 \_FROM\_->\hyperlink{class_b_a_n_k_ae3e45b407bf8ec7175662442ea24b7c0_ae3e45b407bf8ec7175662442ea24b7c0}{SetBalance}(\_FROM\_->GetBalance() - \_amount);
00257                 \_FROM\_TWO\_->SetBalance(\_FROM\_TWO\_->GetBalance() - \_amount);
00258                 \_TO\_->SetBalance(\_TO\_->GetBalance() + (\_amount * 2));
00259                 \textcolor{comment}{/* From std::shared\_ptr<BANK> to std::shared\_ptr<OSTM> to store the memory spaces */}
00260                 \_FROM\_OSTM\_ONE\_ = std::dynamic\_pointer\_cast<\hyperlink{class_o_s_t_m}{OSTM}> (\_FROM\_);
00261                 \_FROM\_OSTM\_TWO\_ = std::dynamic\_pointer\_cast<\hyperlink{class_o_s_t_m}{OSTM}> (\_FROM\_TWO\_);
00262                 \_TO\_OSTM\_ = std::dynamic\_pointer\_cast<\hyperlink{class_o_s_t_m}{OSTM}> (\_TO\_);
00263                 \textcolor{comment}{/* Store changes */}
00264                 tx->store(\_FROM\_OSTM\_ONE\_);
00265                 tx->store(\_FROM\_OSTM\_TWO\_);
00266                 tx->store(\_TO\_OSTM\_);
00267             \}
00268             \textcolor{comment}{/* Commit changes */}
00269             done = tx->commit();
00270         \}
00271     \} \textcolor{keywordflow}{catch} (std::runtime\_error& e) \{
00272         std::cout << e.what() << std::endl;
00273     \}
00274 \}
00275 
00276 
00277 \};
00278 
00279 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* CLIENT\_H */}\textcolor{preprocessor}{}
00280 
\end{DoxyCode}
