\hypertarget{_t_m_8h_source}{}\subsection{T\+M.\+h}

\begin{DoxyCode}
00001 \textcolor{comment}{/* }
00002 \textcolor{comment}{ * File:   TM.h}
00003 \textcolor{comment}{ * Author: Zoltan Fuzesi}
00004 \textcolor{comment}{ * }
00005 \textcolor{comment}{ * Created on December 18, 2017, 2:09 PM}
00006 \textcolor{comment}{ * Transaction Manager class fields and methods declarations}
00007 \textcolor{comment}{ */}
00008 
00009 
00010 \textcolor{preprocessor}{#ifndef TM\_H}
00011 \textcolor{preprocessor}{#define TM\_H}
00012 
00013 \textcolor{preprocessor}{#include <thread>}
00014 \textcolor{preprocessor}{#include <unistd.h>}\textcolor{comment}{//used for pid\_t}
00015 \textcolor{preprocessor}{#include <mutex>}
00016 \textcolor{preprocessor}{#include <unordered\_map>}
00017 \textcolor{preprocessor}{#include <utility>}
00018 \textcolor{preprocessor}{#include <map>}
00019 \textcolor{preprocessor}{#include "\hyperlink{_t_x_8h}{TX.h}"}
00020 
\hypertarget{_t_m_8h_source.tex_l00021}{}\hyperlink{class_t_m}{00021} \textcolor{keyword}{class }\hyperlink{class_t_m}{TM} \{
00022 \textcolor{keyword}{private}:
00026     \hyperlink{class_t_m_a9b5afb6b9d7c5925ab5cc5c65078ac23_a9b5afb6b9d7c5925ab5cc5c65078ac23}{TM}() = \textcolor{keywordflow}{default}; 
00030     \hyperlink{class_t_m_a985f8cb24f685925ddd637c7030cd2b3_a985f8cb24f685925ddd637c7030cd2b3}{~TM}() = \textcolor{keywordflow}{default};
00034     \hyperlink{class_t_m_a9b5afb6b9d7c5925ab5cc5c65078ac23_a9b5afb6b9d7c5925ab5cc5c65078ac23}{TM}(\textcolor{keyword}{const} \hyperlink{class_t_m}{TM}&); \textcolor{comment}{//Modified for testing (= delete) removed }
00038 \textcolor{comment}{}    \hyperlink{class_t_m}{TM}& \hyperlink{class_t_m_a85a6b783f0566f0877bab6a7de977c0a_a85a6b783f0566f0877bab6a7de977c0a}{operator=}(\textcolor{keyword}{const} \hyperlink{class_t_m}{TM}&) = \textcolor{keyword}{delete}; 
\hypertarget{_t_m_8h_source.tex_l00042}{}\hyperlink{class_t_m_a0333dfa193ea99d7626de74a2b932e9b_a0333dfa193ea99d7626de74a2b932e9b}{00042}     std::map<std::thread::id, std::shared\_ptr<TX>>\hyperlink{class_t_m_a0333dfa193ea99d7626de74a2b932e9b_a0333dfa193ea99d7626de74a2b932e9b}{txMap};
\hypertarget{_t_m_8h_source.tex_l00047}{}\hyperlink{class_t_m_a81c3bd28ad2343a620fa070f8ac186ca_a81c3bd28ad2343a620fa070f8ac186ca}{00047}     \textcolor{keyword}{static} std::map<pid\_t, std::map< std::thread::id, int >> 
      \hyperlink{class_t_m_a81c3bd28ad2343a620fa070f8ac186ca_a81c3bd28ad2343a620fa070f8ac186ca}{process\_map\_collection};
00051     \textcolor{comment}{//std::map< std::thread::id, int > get\_thread\_Map();}
00055 \textcolor{comment}{}    \textcolor{keywordtype}{void} \hyperlink{class_t_m_a26ea481c24d9aa3aebd6dafb7253376e_a26ea481c24d9aa3aebd6dafb7253376e}{registerTX}(); 
\hypertarget{_t_m_8h_source.tex_l00059}{}\hyperlink{class_t_m_aeb26546681bfe64e21606b8c012bb8c3_aeb26546681bfe64e21606b8c012bb8c3}{00059}     std::mutex \hyperlink{class_t_m_aeb26546681bfe64e21606b8c012bb8c3_aeb26546681bfe64e21606b8c012bb8c3}{register\_Lock};
\hypertarget{_t_m_8h_source.tex_l00063}{}\hyperlink{class_t_m_a123bc5aa0766a7b909bebc54a429e5b0_a123bc5aa0766a7b909bebc54a429e5b0}{00063}     std::mutex \hyperlink{class_t_m_a123bc5aa0766a7b909bebc54a429e5b0_a123bc5aa0766a7b909bebc54a429e5b0}{get\_Lock};
\hypertarget{_t_m_8h_source.tex_l00067}{}\hyperlink{class_t_m_a6fb90615393f9205838e302c714bbd60_a6fb90615393f9205838e302c714bbd60}{00067}     \textcolor{keyword}{static} pid\_t \hyperlink{class_t_m_a6fb90615393f9205838e302c714bbd60_a6fb90615393f9205838e302c714bbd60}{\_tm\_id};
00068 
00069 
00070 \textcolor{keyword}{public}:
00071 
00075     \textcolor{keyword}{static} \hyperlink{class_t_m}{TM}& \hyperlink{class_t_m_a7ce5f35e0dae76df4fe116cf905bbe60_a7ce5f35e0dae76df4fe116cf905bbe60}{Instance}();
00079     std::shared\_ptr<TX>\textcolor{keyword}{const} \hyperlink{class_t_m_a41cb0226cc4080c931651b13f74a0075_a41cb0226cc4080c931651b13f74a0075}{\_get\_tx}(); 
00083     \textcolor{keywordtype}{void} \hyperlink{class_t_m_a5e2d1127f2429f2f524d25f430eade06_a5e2d1127f2429f2f524d25f430eade06}{\_TX\_EXIT}();
00087     \textcolor{keywordtype}{void} \hyperlink{class_t_m_a1d6891b1d3e71cc0acef54e7afe71c09_a1d6891b1d3e71cc0acef54e7afe71c09}{print\_all}();
00088     \textcolor{comment}{/*}
00089 \textcolor{comment}{     * Added for testing}
00090 \textcolor{comment}{     */}
\hypertarget{_t_m_8h_source.tex_l00091}{}\hyperlink{class_t_m_a3285005a8f3e9fed99b024dac86fae05_a3285005a8f3e9fed99b024dac86fae05}{00091}     \textcolor{keywordtype}{bool} \hyperlink{class_t_m_a3285005a8f3e9fed99b024dac86fae05_a3285005a8f3e9fed99b024dac86fae05}{operator==}(\textcolor{keyword}{const} \hyperlink{class_t_m}{TM} &rhs)\textcolor{keyword}{ const }\{
00092         \textcolor{keywordflow}{return} &rhs == \textcolor{keyword}{this};
00093     \}
00094     \textcolor{comment}{//moved from private to public for testing purpose}
00095     std::map< std::thread::id, int > \hyperlink{class_t_m_afb8bc9f42fe06c52747beb7f4c46915c_afb8bc9f42fe06c52747beb7f4c46915c}{get\_thread\_Map}();
00096   
00097     
00098    
00099     
00100 
00101 \};
00102 
00103 
00104 \textcolor{preprocessor}{#endif // TM\_H}
\end{DoxyCode}
