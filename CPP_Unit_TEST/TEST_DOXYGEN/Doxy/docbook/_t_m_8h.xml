<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_t_m_8h">
    <title>TM.h File Reference</title>
    <programlisting>#include &lt;thread&gt;</programlisting>
    <programlisting>#include &lt;unistd.h&gt;</programlisting>
    <programlisting>#include &lt;mutex&gt;</programlisting>
    <programlisting>#include &lt;unordered_map&gt;</programlisting>
    <programlisting>#include &lt;utility&gt;</programlisting>
    <programlisting>#include &lt;map&gt;</programlisting>
    <programlisting>#include &quot;TX.h&quot;</programlisting>
<para>Include dependency diagram for TM.h</para>
<para>
    <figure>
        <title>Dependency diagram</title>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="1" fileref="_t_m_8h__incl.png"></imagedata>
            </imageobject>
        </mediaobject>
    </figure>
</para>
<para>Included by dependency diagram for TM.h</para>
<para>
    <figure>
        <title>Dependency diagram</title>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="1" fileref="_t_m_8h__dep__incl.png"></imagedata>
            </imageobject>
        </mediaobject>
    </figure>
</para>
        <section>
            <title> Classes </title>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>struct <link linkend="class_t_m">TM</link></para>
                    </listitem>
                </itemizedlist>
            </para>
        </section>
    <simplesect>
        <title>Detailed Description</title>
    <para>Definition in file TM.h</para>
    </simplesect>
    <literallayout><computeroutput>
1 <emphasis class="comment">/*&#32;</emphasis>
2 <emphasis class="comment">&#32;*&#32;File:&#32;&#32;&#32;TM.h</emphasis>
3 <emphasis class="comment">&#32;*&#32;Author:&#32;Zoltan&#32;Fuzesi</emphasis>
4 <emphasis class="comment">&#32;*&#32;</emphasis>
5 <emphasis class="comment">&#32;*&#32;Created&#32;on&#32;December&#32;18,&#32;2017,&#32;2:09&#32;PM</emphasis>
6 <emphasis class="comment">&#32;*&#32;Transaction&#32;Manager&#32;class&#32;fields&#32;and&#32;methods&#32;declarations</emphasis>
7 <emphasis class="comment">&#32;*/</emphasis>
8 
9 
10 <emphasis class="preprocessor">#ifndef&#32;TM_H</emphasis>
11 <emphasis class="preprocessor">#define&#32;TM_H</emphasis>
12 
13 <emphasis class="preprocessor">#include&#32;&lt;thread&gt;</emphasis>
14 <emphasis class="preprocessor">#include&#32;&lt;unistd.h&gt;</emphasis><emphasis class="comment">//used&#32;for&#32;pid_t</emphasis>
15 <emphasis class="preprocessor">#include&#32;&lt;mutex&gt;</emphasis>
16 <emphasis class="preprocessor">#include&#32;&lt;unordered_map&gt;</emphasis>
17 <emphasis class="preprocessor">#include&#32;&lt;utility&gt;</emphasis>
18 <emphasis class="preprocessor">#include&#32;&lt;map&gt;</emphasis>
19 <emphasis class="preprocessor">#include&#32;&quot;<link linkend="_t_x_8h">TX.h</link>&quot;</emphasis>
20 
<link linkend="class_t_m">21 </link><emphasis class="keyword">class&#32;</emphasis><link linkend="class_t_m">TM</link>&#32;{
22 <emphasis class="keyword">private</emphasis>:
26 &#32;&#32;&#32;&#32;<link linkend="class_t_m_a9b5afb6b9d7c5925ab5cc5c65078ac23_1a9b5afb6b9d7c5925ab5cc5c65078ac23">TM</link>()&#32;=&#32;<emphasis class="keywordflow">default</emphasis>;&#32;
30 &#32;&#32;&#32;&#32;<link linkend="class_t_m_a985f8cb24f685925ddd637c7030cd2b3_1a985f8cb24f685925ddd637c7030cd2b3">~TM</link>()&#32;=&#32;<emphasis class="keywordflow">default</emphasis>;
34 &#32;&#32;&#32;&#32;<link linkend="class_t_m_a9b5afb6b9d7c5925ab5cc5c65078ac23_1a9b5afb6b9d7c5925ab5cc5c65078ac23">TM</link>(<emphasis class="keyword">const</emphasis>&#32;<link linkend="class_t_m">TM</link>&amp;);&#32;<emphasis class="comment">//Modified&#32;for&#32;testing&#32;(=&#32;delete)&#32;removed&#32;</emphasis>
38 <emphasis class="comment"></emphasis>&#32;&#32;&#32;&#32;<link linkend="class_t_m">TM</link>&amp;&#32;<link linkend="class_t_m_a85a6b783f0566f0877bab6a7de977c0a_1a85a6b783f0566f0877bab6a7de977c0a">operator=</link>(<emphasis class="keyword">const</emphasis>&#32;<link linkend="class_t_m">TM</link>&amp;)&#32;=&#32;<emphasis class="keyword">delete</emphasis>;&#32;
<link linkend="class_t_m_a0333dfa193ea99d7626de74a2b932e9b_1a0333dfa193ea99d7626de74a2b932e9b">42 </link>&#32;&#32;&#32;&#32;std::map&lt;std::thread::id,&#32;std::shared_ptr&lt;TX&gt;&gt;<link linkend="class_t_m_a0333dfa193ea99d7626de74a2b932e9b_1a0333dfa193ea99d7626de74a2b932e9b">txMap</link>;
<link linkend="class_t_m_a81c3bd28ad2343a620fa070f8ac186ca_1a81c3bd28ad2343a620fa070f8ac186ca">47 </link>&#32;&#32;&#32;&#32;<emphasis class="keyword">static</emphasis>&#32;std::map&lt;pid_t,&#32;std::map&lt;&#32;std::thread::id,&#32;int&#32;&gt;&gt;&#32;<link linkend="class_t_m_a81c3bd28ad2343a620fa070f8ac186ca_1a81c3bd28ad2343a620fa070f8ac186ca">process_map_collection</link>;
51 &#32;&#32;&#32;&#32;<emphasis class="comment">//std::map&lt;&#32;std::thread::id,&#32;int&#32;&gt;&#32;get_thread_Map();</emphasis>
55 <emphasis class="comment"></emphasis>&#32;&#32;&#32;&#32;<emphasis class="keywordtype">void</emphasis>&#32;<link linkend="class_t_m_a26ea481c24d9aa3aebd6dafb7253376e_1a26ea481c24d9aa3aebd6dafb7253376e">registerTX</link>();&#32;
<link linkend="class_t_m_aeb26546681bfe64e21606b8c012bb8c3_1aeb26546681bfe64e21606b8c012bb8c3">59 </link>&#32;&#32;&#32;&#32;std::mutex&#32;<link linkend="class_t_m_aeb26546681bfe64e21606b8c012bb8c3_1aeb26546681bfe64e21606b8c012bb8c3">register_Lock</link>;
<link linkend="class_t_m_a123bc5aa0766a7b909bebc54a429e5b0_1a123bc5aa0766a7b909bebc54a429e5b0">63 </link>&#32;&#32;&#32;&#32;std::mutex&#32;<link linkend="class_t_m_a123bc5aa0766a7b909bebc54a429e5b0_1a123bc5aa0766a7b909bebc54a429e5b0">get_Lock</link>;
<link linkend="class_t_m_a6fb90615393f9205838e302c714bbd60_1a6fb90615393f9205838e302c714bbd60">67 </link>&#32;&#32;&#32;&#32;<emphasis class="keyword">static</emphasis>&#32;pid_t&#32;<link linkend="class_t_m_a6fb90615393f9205838e302c714bbd60_1a6fb90615393f9205838e302c714bbd60">_tm_id</link>;
68 
69 
70 <emphasis class="keyword">public</emphasis>:
71 
75 &#32;&#32;&#32;&#32;<emphasis class="keyword">static</emphasis>&#32;<link linkend="class_t_m">TM</link>&amp;&#32;<link linkend="class_t_m_a7ce5f35e0dae76df4fe116cf905bbe60_1a7ce5f35e0dae76df4fe116cf905bbe60">Instance</link>();
79 &#32;&#32;&#32;&#32;std::shared_ptr&lt;TX&gt;<emphasis class="keyword">const</emphasis>&#32;<link linkend="class_t_m_a41cb0226cc4080c931651b13f74a0075_1a41cb0226cc4080c931651b13f74a0075">_get_tx</link>();&#32;
83 &#32;&#32;&#32;&#32;<emphasis class="keywordtype">void</emphasis>&#32;<link linkend="class_t_m_a5e2d1127f2429f2f524d25f430eade06_1a5e2d1127f2429f2f524d25f430eade06">_TX_EXIT</link>();
87 &#32;&#32;&#32;&#32;<emphasis class="keywordtype">void</emphasis>&#32;<link linkend="class_t_m_a1d6891b1d3e71cc0acef54e7afe71c09_1a1d6891b1d3e71cc0acef54e7afe71c09">print_all</link>();
88 &#32;&#32;&#32;&#32;<emphasis class="comment">/*</emphasis>
89 <emphasis class="comment">&#32;&#32;&#32;&#32;&#32;*&#32;Added&#32;for&#32;testing</emphasis>
90 <emphasis class="comment">&#32;&#32;&#32;&#32;&#32;*/</emphasis>
<link linkend="class_t_m_a3285005a8f3e9fed99b024dac86fae05_1a3285005a8f3e9fed99b024dac86fae05">91 </link>&#32;&#32;&#32;&#32;<emphasis class="keywordtype">bool</emphasis>&#32;<link linkend="class_t_m_a3285005a8f3e9fed99b024dac86fae05_1a3285005a8f3e9fed99b024dac86fae05">operator==</link>(<emphasis class="keyword">const</emphasis>&#32;<link linkend="class_t_m">TM</link>&#32;&amp;rhs)<emphasis class="keyword">&#32;const&#32;</emphasis>{
92 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keywordflow">return</emphasis>&#32;&amp;rhs&#32;==&#32;<emphasis class="keyword">this</emphasis>;
93 &#32;&#32;&#32;&#32;}
94 &#32;&#32;&#32;&#32;<emphasis class="comment">//moved&#32;from&#32;private&#32;to&#32;public&#32;for&#32;testing&#32;purpose</emphasis>
95 &#32;&#32;&#32;&#32;std::map&lt;&#32;std::thread::id,&#32;int&#32;&gt;&#32;<link linkend="class_t_m_afb8bc9f42fe06c52747beb7f4c46915c_1afb8bc9f42fe06c52747beb7f4c46915c">get_thread_Map</link>();
96 &#32;&#32;
97 &#32;&#32;&#32;&#32;
98 &#32;&#32;&#32;
99 &#32;&#32;&#32;&#32;
100 
101 };
102 
103 
104 <emphasis class="preprocessor">#endif&#32;//&#32;TM_H</emphasis>
    </computeroutput></literallayout>
</section>
