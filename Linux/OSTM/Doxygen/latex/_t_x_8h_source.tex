\hypertarget{_t_x_8h_source}{}\subsection{T\+X.\+h}

\begin{DoxyCode}
00001 \textcolor{comment}{/* }
00002 \textcolor{comment}{ * File:   TX.h}
00003 \textcolor{comment}{ * Author: Zoltan Fuzesi}
00004 \textcolor{comment}{ * }
00005 \textcolor{comment}{ * Created on December 18, 2017, 2:09 PM}
00006 \textcolor{comment}{ * Transaction class fields and methods declarations}
00007 \textcolor{comment}{ */}
00008 
00009 \textcolor{preprocessor}{#ifndef TX\_H}
00010 \textcolor{preprocessor}{#define TX\_H}
00011 \textcolor{preprocessor}{#include <cstdlib>}
00012 \textcolor{preprocessor}{#include <utility>}
00013 \textcolor{preprocessor}{#include <map>}
00014 \textcolor{preprocessor}{#include <iostream>}
00015 \textcolor{preprocessor}{#include <mutex>}
00016 \textcolor{preprocessor}{#include <unistd.h>}
00017 \textcolor{preprocessor}{#include <memory>}
00018 \textcolor{preprocessor}{#include <stdio.h>}
00019 \textcolor{preprocessor}{#include <thread>}
00020 \textcolor{preprocessor}{#include "OSTM.h"}
00021 
00022 \textcolor{keyword}{class }\hyperlink{class_t_m}{TM};
00023 
\hypertarget{_t_x_8h_source.tex_l00024}{}\hyperlink{class_t_x}{00024} \textcolor{keyword}{class }\hyperlink{class_t_x}{TX} \{
00025 \textcolor{keyword}{public}:
00029     \hyperlink{class_t_x_a8a4b83eab0171ae834bfa92bbced1094}{TX}(std::thread::id \textcolor{keywordtype}{id});
00033     \hyperlink{class_t_x_abecf854cc3228ab6dd51175b3cd1c70a}{~TX}();
00037     \hyperlink{class_t_x_a8a4b83eab0171ae834bfa92bbced1094}{TX}(\textcolor{keyword}{const} \hyperlink{class_t_x}{TX}& orig);
00041     \textcolor{keywordtype}{void} \hyperlink{class_t_x_aa9739c5c2077454c779098db7baefc2b}{ostm\_exit}();
00042     
00046     \textcolor{keywordtype}{void} \hyperlink{class_t_x_abc32af2f51df97ac483e5bfe7db6ca6e}{\_register}(std::shared\_ptr<OSTM>  \textcolor{keywordtype}{object});
00050     std::shared\_ptr<OSTM>  \hyperlink{class_t_x_a1d78262b8831ddd042ed491f2e600e24}{load}(std::shared\_ptr<OSTM>  \textcolor{keywordtype}{object});
00054     \textcolor{keywordtype}{void} \hyperlink{class_t_x_a7dbcb369aa4a3370b6c6829d278ece5d}{store}(std::shared\_ptr<OSTM>  \textcolor{keywordtype}{object});
00058     \textcolor{keywordtype}{bool} \hyperlink{class_t_x_a9dde5d356b35e557448e58d260087356}{commit}();
00062     \textcolor{keywordtype}{void} \hyperlink{class_t_x_a1384bdf12d795854b5d32e7f61ffbdb8}{\_increase\_tx\_nesting}();
00066     \textcolor{keywordtype}{void} \hyperlink{class_t_x_aa3ac499f576326588628ade96b27b4b1}{\_decrease\_tx\_nesting}();
\hypertarget{_t_x_8h_source.tex_l00070}{}\hyperlink{class_t_x_adf1ccda799ef5c419cb43b8ae55eb45c}{00070}     \textcolor{keyword}{friend} \textcolor{keyword}{class }\hyperlink{class_t_m}{TM};
00071     \textcolor{comment}{/*}
00072 \textcolor{comment}{     * \(\backslash\)brief ONLY FOR TESTING!!! returning the number of rollback happened during transactions}
00073 \textcolor{comment}{     */}
00074     \textcolor{keywordtype}{int} \hyperlink{class_t_x_ae9bf97930c4670f59d334b345353a71e}{getTest\_counter}();
\hypertarget{_t_x_8h_source.tex_l00078}{}\hyperlink{class_t_x_a25838234aab99ae891a90eb8623a8b3c}{00078}     \textcolor{keyword}{static} \textcolor{keywordtype}{int} \hyperlink{class_t_x_a25838234aab99ae891a90eb8623a8b3c}{test\_counter};
00079     \textcolor{comment}{/*}
00080 \textcolor{comment}{     * TESTING ONLY}
00081 \textcolor{comment}{     */}
00082     \textcolor{keywordtype}{void} \hyperlink{class_t_x_a3d96ed91eb9ec73e16589f705661c5a7}{\_print\_all\_tx}() ;
00083 
00084 
00085 \textcolor{keyword}{private}:
00090     std::map< int, std::shared\_ptr<OSTM>  > working\_Map\_collection;
00096     std::thread::id transaction\_Number;
00100     \textcolor{keywordtype}{int} \_tx\_nesting\_level;
00101     
00106     \textcolor{keyword}{static} std::map<int, std::shared\_ptr<OSTM>  >main\_Process\_Map\_collection;
00111     \textcolor{keyword}{static} std::map<pid\_t, std::map< int, int >> process\_map\_collection;
00115     std::map< int , int > get\_thread\_Map();
00119     \textcolor{keyword}{static} std::mutex register\_Lock;
00123     \textcolor{keyword}{const} std::thread::id \_get\_tx\_number() \textcolor{keyword}{const};
00124    
00128     \textcolor{keywordtype}{void} \_release\_object\_lock();
00132     \textcolor{keywordtype}{void} th\_exit();
00133     
00134     
00135 
00136 \};
00137 \textcolor{preprocessor}{#endif // \_TX\_H\_}
\end{DoxyCode}
