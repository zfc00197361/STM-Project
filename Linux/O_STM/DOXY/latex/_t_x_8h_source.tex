\hypertarget{_t_x_8h_source}{}\subsection{T\+X.\+h}

\begin{DoxyCode}
00001 \textcolor{comment}{/* }
00002 \textcolor{comment}{ * File:   TX.h}
00003 \textcolor{comment}{ * Author: Zoltan Fuzesi}
00004 \textcolor{comment}{ * }
00005 \textcolor{comment}{ * Created on December 18, 2017, 2:09 PM}
00006 \textcolor{comment}{ * Transaction class fields and methods declarations}
00007 \textcolor{comment}{ */}
00008 
00009 \textcolor{preprocessor}{#ifndef TX\_H}
00010 \textcolor{preprocessor}{#define TX\_H}
00011 \textcolor{preprocessor}{#include <cstdlib>}
00012 \textcolor{preprocessor}{#include <utility>}
00013 \textcolor{preprocessor}{#include <map>}
00014 \textcolor{preprocessor}{#include <iostream>}
00015 \textcolor{preprocessor}{#include <mutex>}
00016 \textcolor{preprocessor}{#include <unistd.h>}
00017 \textcolor{comment}{//#include <io.h>}
00018 \textcolor{preprocessor}{#include <memory>}
00019 \textcolor{comment}{//#include <process.h>}
00020 \textcolor{preprocessor}{#include <stdio.h>}
00021 \textcolor{preprocessor}{#include <thread>}
00022 \textcolor{preprocessor}{#include "\hyperlink{_o_s_t_m_8h}{OSTM.h}"}
00023 
00024 \textcolor{keyword}{class }\hyperlink{class_t_m}{TM};
00025 
\hypertarget{_t_x_8h_source.tex_l00026}{}\hyperlink{class_t_x}{00026} \textcolor{keyword}{class }\hyperlink{class_t_x}{TX} \{
00027 \textcolor{keyword}{public}:
00031     \hyperlink{class_t_x_a8a4b83eab0171ae834bfa92bbced1094_a8a4b83eab0171ae834bfa92bbced1094}{TX}(std::thread::id \textcolor{keywordtype}{id});
00035     \hyperlink{class_t_x_abecf854cc3228ab6dd51175b3cd1c70a_abecf854cc3228ab6dd51175b3cd1c70a}{~TX}();
00039     \hyperlink{class_t_x_a8a4b83eab0171ae834bfa92bbced1094_a8a4b83eab0171ae834bfa92bbced1094}{TX}(\textcolor{keyword}{const} \hyperlink{class_t_x}{TX}& orig);
00043     \textcolor{keywordtype}{void} \hyperlink{class_t_x_aa9739c5c2077454c779098db7baefc2b_aa9739c5c2077454c779098db7baefc2b}{ostm\_exit}();
00044     
00048     \textcolor{keywordtype}{void} \hyperlink{class_t_x_abc32af2f51df97ac483e5bfe7db6ca6e_abc32af2f51df97ac483e5bfe7db6ca6e}{\_register}(std::shared\_ptr<OSTM>  \textcolor{keywordtype}{object});
00052     std::shared\_ptr<OSTM>  \hyperlink{class_t_x_a1d78262b8831ddd042ed491f2e600e24_a1d78262b8831ddd042ed491f2e600e24}{load}(std::shared\_ptr<OSTM>  \textcolor{keywordtype}{object});
00056     \textcolor{keywordtype}{void} \hyperlink{class_t_x_a7dbcb369aa4a3370b6c6829d278ece5d_a7dbcb369aa4a3370b6c6829d278ece5d}{store}(std::shared\_ptr<OSTM>  \textcolor{keywordtype}{object});
00060     \textcolor{keywordtype}{bool} \hyperlink{class_t_x_a9dde5d356b35e557448e58d260087356_a9dde5d356b35e557448e58d260087356}{commit}();
00064     \textcolor{keywordtype}{void} \hyperlink{class_t_x_a1384bdf12d795854b5d32e7f61ffbdb8_a1384bdf12d795854b5d32e7f61ffbdb8}{\_increase\_tx\_nesting}();
00068     \textcolor{keywordtype}{void} \hyperlink{class_t_x_aa3ac499f576326588628ade96b27b4b1_aa3ac499f576326588628ade96b27b4b1}{\_decrease\_tx\_nesting}();
\hypertarget{_t_x_8h_source.tex_l00072}{}\hyperlink{class_t_x_adf1ccda799ef5c419cb43b8ae55eb45c_adf1ccda799ef5c419cb43b8ae55eb45c}{00072}     \textcolor{keyword}{friend} \textcolor{keyword}{class }\hyperlink{class_t_m}{TM};
00073     \textcolor{comment}{/*}
00074 \textcolor{comment}{     * \(\backslash\)brief ONLY FOR TESTING!!! returning the number of rollback happened during transactions}
00075 \textcolor{comment}{     */}
00076     \textcolor{keywordtype}{int} \hyperlink{class_t_x_ae9bf97930c4670f59d334b345353a71e_ae9bf97930c4670f59d334b345353a71e}{getTest\_counter}();
\hypertarget{_t_x_8h_source.tex_l00080}{}\hyperlink{class_t_x_a25838234aab99ae891a90eb8623a8b3c_a25838234aab99ae891a90eb8623a8b3c}{00080}     \textcolor{keyword}{static} \textcolor{keywordtype}{int} \hyperlink{class_t_x_a25838234aab99ae891a90eb8623a8b3c_a25838234aab99ae891a90eb8623a8b3c}{test\_counter};
00081     \textcolor{comment}{/*}
00082 \textcolor{comment}{     * TESTING ONLY}
00083 \textcolor{comment}{     */}
00084     \textcolor{keywordtype}{void} \hyperlink{class_t_x_a3d96ed91eb9ec73e16589f705661c5a7_a3d96ed91eb9ec73e16589f705661c5a7}{\_print\_all\_tx}() ;
00085 
00086 
00087 \textcolor{keyword}{private}:
\hypertarget{_t_x_8h_source.tex_l00092}{}\hyperlink{class_t_x_a81aafda16e2f20e36ec6c68e584668ff_a81aafda16e2f20e36ec6c68e584668ff}{00092}     std::map< int, std::shared\_ptr<OSTM>  > \hyperlink{class_t_x_a81aafda16e2f20e36ec6c68e584668ff_a81aafda16e2f20e36ec6c68e584668ff}{working\_Map\_collection};
\hypertarget{_t_x_8h_source.tex_l00098}{}\hyperlink{class_t_x_a145a1c74b521f277fe481971a930b249_a145a1c74b521f277fe481971a930b249}{00098}     std::thread::id \hyperlink{class_t_x_a145a1c74b521f277fe481971a930b249_a145a1c74b521f277fe481971a930b249}{transaction\_Number};
\hypertarget{_t_x_8h_source.tex_l00102}{}\hyperlink{class_t_x_ae8f413fd7f4fea322e7ad3c668f9898e_ae8f413fd7f4fea322e7ad3c668f9898e}{00102}     \textcolor{keywordtype}{int} \hyperlink{class_t_x_ae8f413fd7f4fea322e7ad3c668f9898e_ae8f413fd7f4fea322e7ad3c668f9898e}{\_tx\_nesting\_level};
00103     
\hypertarget{_t_x_8h_source.tex_l00108}{}\hyperlink{class_t_x_a1a45d726894190695314464d7cd97c29_a1a45d726894190695314464d7cd97c29}{00108}     \textcolor{keyword}{static} std::map<int, std::shared\_ptr<OSTM>  >\hyperlink{class_t_x_a1a45d726894190695314464d7cd97c29_a1a45d726894190695314464d7cd97c29}{main\_Process\_Map\_collection};
\hypertarget{_t_x_8h_source.tex_l00113}{}\hyperlink{class_t_x_aea5b8eedcd5059384155576b3979a5f6_aea5b8eedcd5059384155576b3979a5f6}{00113}     \textcolor{keyword}{static} std::map<int, std::map< int, int >> \hyperlink{class_t_x_aea5b8eedcd5059384155576b3979a5f6_aea5b8eedcd5059384155576b3979a5f6}{process\_map\_collection};
00114     \textcolor{comment}{//static std::map<pid\_t, std::map< int, std::pair<ppid, int>  >> process\_map\_collection;}
00118 \textcolor{comment}{}    std::map< int , int > \hyperlink{class_t_x_a3f5671423cb7b9f9c98f8a25f2a4b545_a3f5671423cb7b9f9c98f8a25f2a4b545}{get\_thread\_Map}();
\hypertarget{_t_x_8h_source.tex_l00122}{}\hyperlink{class_t_x_aa688a8c96fa3cdf8cd92e267463536dc_aa688a8c96fa3cdf8cd92e267463536dc}{00122}     \textcolor{keyword}{static} std::mutex \hyperlink{class_t_x_aa688a8c96fa3cdf8cd92e267463536dc_aa688a8c96fa3cdf8cd92e267463536dc}{register\_Lock};
00126     \textcolor{keyword}{const} std::thread::id \hyperlink{class_t_x_a9eba04944d449285905b60ec47223cff_a9eba04944d449285905b60ec47223cff}{\_get\_tx\_number}() \textcolor{keyword}{const};
00127    
00131     \textcolor{keywordtype}{void} \hyperlink{class_t_x_a4c13d2015dc15d0f788fa9a1413f0463_a4c13d2015dc15d0f788fa9a1413f0463}{\_release\_object\_lock}();
00135     \textcolor{keywordtype}{void} \hyperlink{class_t_x_ae045534c4a9d39bd5c6ea2a39a372a79_ae045534c4a9d39bd5c6ea2a39a372a79}{th\_exit}();
00136     
00137     
00138 
00139 \};
00140 \textcolor{preprocessor}{#endif // \_TX\_H\_}
\end{DoxyCode}
